---
layout: single
title:  "유니티 버젼 이해"
categories: Chatter
tag: [WIP]
sidebar:
    nav: "counts"
typora-root-url: ../
---

유니티 버젼 이해


불변 객체
string 은 클래스 임에도 복사본 변경 시 원본이 변경되지 않음

클래스는 힙 메모리에서 주소를 보관, 그래서 복사를 만들면 얕은 복사가 되고, 복사본 바뀌면 원본도 바뀜
그런데 string 은 이것과 좀 다르게 작동함


복사본이 값이 변경되면 원본의 주소와 값이 변경된다는게 맞을까요?
  -> 원본을 바꾸면 원본의 주소와 값이 변경, 복사본을 바꾸면 복사본의 주소와 값이 변경
  -> 만약 복사가 없을 때 원본이 변경되면 이 때도 원본의 주소와 값이 변경되는데, 기존 원본은 참조할 주소가 사라졌으니 가비지 컬렉터가 언젠간 수거함



string 도 계속 변경될 때마다 힙 메모리에 재할당 -> string 많은 경우 최적화 필요

csv, json 등 테이블 로 불러오는게 string 계속 생성하고 바꾸는 것 보다 나음
그러나 채팅 등 문자열의 입력과 수정이 많은 게임은 어쩔 수 없이 사용해야 함
    -> 이 경우 내부적으로 char 배열을 미리 길게 만들고, 만약 부족할 경우 공간 추가로 늘려서 재할당해서 사용하는 방식을 사용 (string 재할당하는 것보단 불변 객체 재할당 빈도가 줄어듦, string builder의 동작 원리)
그래도 요즘은 가비지 컬렉트가 좋아져서 왠만한 상황에서는 별 문제가 되지는 않음




string builder 다양한 기능
-> 어디서 사용하나 찾아보자



아래는 사용하면 유용한 부가 기능
    배웠으니 굳이 사용해야지 방향성은 지양해야



nullable
-> 콜라이더에 몬스터가 얼마나 충돌했는지 확인할 때, 오류가 나서 측정 자체가 안되면 null, 측정했는데 0명 충돌시 0 등으로 사용할 수 있음
    nullable 예시 중 유니티에서 충돌한 몬스터 개수를 판단하는 기능을 사용할 때, 측정 안되면 null 말고, -1 처럼 나올 수 없는 숫자로 출력하는 방법도 있을 것 같은데, 개발하는 입장에서 더 편하거나, 팀의 규칙에 맞게 선택하면 되는 부분일까요?
        ->  상황에 따라 선택하시면 됩니다


기타 연산자
    삼항 연산자 -> 엑셀 if 문 같음, 그러나 너무 길어지면 if 문 사용하는게 더 가독성 있음
    ? 연산자    -> '!= null 체크해서 true 일시 기능 수행
    ?? 연산자

const -> 상수, static 접근할 때 처럼 클래스_명.상수_명 으로 접근해야, 일종의 static 이기 때문, 컴파일 타임에 값이 결정됨
    사용자 정의 자료형은 const 키워드를 붙이면 에러가 뜸 (기본 자료형만 됨)

readonly -> 런타임에 단 한 번만 설정할 수 있음, 사용자 정의 자료형을 상수처럼 사용하고 싶으면 readonly 사용 (그러나 값 변경의 개념보다는 딱 한 번만 설정할 수 있다에 가까움)
    readonly 는 런타임 중 필드에서 값 로드 됨
    기본 자료형도 readonly 사용 가능


튜플 -> 과거에는 참조 타입, c# 6인가 7버젼에선 잘 구현된 구조체 튜플 사용 가능
    기본은 item1, item2 -> 그러나 명칭 설정 가능
    튜플은 구조체로 선언됨
    너무 남용하면 가독성이 안좋아짐, 구조체나 클래스는 명칭이 나오는데, 튜플은 안 나오기 때문
        자주 사용하는 기능은 구조체나 클래스로 만들기
 	
튜플은 숫자가 0이 아니라 1부터 시작하는데, 인덱스랑 규칙이 다른 이유가 특별히 있을까요?
    -> 네이밍 차이입니다. 인덱스는 메모리 주소의 연산을 통해서 접근하는거구요


옵셔널 파라메터
    입력 따로 안하면 기본 값 세팅하게
        오버로딩
        매개변수에다 기본 값 넣어주기 -> 그러나 가급적 사용하지 않기(생성자가 값 넣어주라고 하는 건데 의도랑 맞지 않아질 수 있음, 특히 협업 시 코드의 의도를 파악하기 어려워질 수 있음)


코드 뜯어보는 건 좋은 습관
그러나 현 단계에서는 깊게 가지는 말기
